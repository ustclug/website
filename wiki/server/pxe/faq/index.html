<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
    <!-- begin _includes/seo.html -->
    <title>中国科学技术大学校园网 PXE 服务 FAQ - LUG @ USTC</title>
    <meta name="description" content="中国科学技术大学校园网 PXE 服务 FAQ">
    <meta name="author" content="USTCLUG">
    <meta property="article:author" content="USTCLUG">
    <meta property="og:type" content="article">
    <meta property="og:locale" content="zh_CN">
    <meta property="og:site_name" content="LUG @ USTC">
    <meta property="og:title" content="中国科学技术大学校园网 PXE 服务 FAQ">
    <meta property="og:url" content="https://lug.ustc.edu.cn/wiki/server/pxe/faq/">
    <meta property="og:description" content="中国科学技术大学校园网 PXE 服务 FAQ">
    <meta property="article:published_time" content="2020-08-15T12:48:35+08:00">
    <meta property="article:modified_time" content="2022-12-09T16:35:50+08:00">
    <link rel="canonical" href="https://lug.ustc.edu.cn/wiki/server/pxe/faq/">
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",

          "@type": "Person",
          "name": "USTCLUG",
          "url": "https://lug.ustc.edu.cn/"

      }
    </script>
    <!-- end _includes/seo.html -->
    <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="LUG @ USTC Feed">
    <!-- https://t.co/dKP3o1e -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="57x57" href="/static/favicon/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/static/favicon/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/static/favicon/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/static/favicon/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/static/favicon/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/static/favicon/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/static/favicon/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/favicon/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/favicon/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192"  href="/static/favicon/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/static/favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16x16.png">
    <link rel="manifest" href="/static/favicon/manifest.json">
    <meta name="msapplication-TileColor" content="#f3f6f6">
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
    <meta name="theme-color" content="#f3f6f6">
    <script>
      document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
    </script>
    <!-- For all browsers -->
    <link rel="stylesheet" href="/assets/css/main.css?v=f851c1562">
    <link rel="stylesheet" href="/_extra/fontawesome/css/all.min.css" media="invalid" onload="this.media='all'">
    <link rel="stylesheet" href="/_extra/open-sans.css" media="invalid" onload="this.media='all'">
    <!--[if IE]>
      <style>
        /* old IE unsupported flexbox fixes */
        .greedy-nav .site-title {
          padding-right: 3em;
        }
        .greedy-nav button {
          position: absolute;
          top: 0;
          right: 0;
          height: 100%;
        }
      </style>
    <![endif]-->
    <!-- start custom head snippets -->
    <!-- insert favicons. use https://realfavicongenerator.net/ -->
    <!-- end custom head snippets -->
  </head>
  <body class="layout--single">
    <nav class="skip-links">
      <ul>
        <li><a href="#site-nav" class="screen-reader-shortcut">转到主导航栏</a></li>
        <li><a href="#main" class="screen-reader-shortcut">转到内容</a></li>
        <li><a href="#footer" class="screen-reader-shortcut">转到底部</a></li>
      </ul>
    </nav>
    <!--[if lt IE 9]>
      <div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
    <![endif]-->
    <div class="masthead">
      <div class="masthead__inner-wrap">
        <div class="masthead__menu">
          <nav id="site-nav" class="greedy-nav">
            <a class="site-logo" href="/"><img src="/static/lug-penguin.png" alt="LUG @ USTC"></a>
            <a class="site-title" href="/">
              LUG @ USTC
            </a>
            <ul class="visible-links">
              <li class="masthead__menu-item">
                <a href="/wiki/"><i class="fad fa-lg fa-fw fa-star-shooting"></i> Wiki</a>
              </li>
              <li class="masthead__menu-item">
                <a href="/news/"><i class="fad fa-lg fa-fw fa-newspaper"></i> News</a>
              </li>
              <li class="masthead__menu-item">
                <a href="/planet/"><i class="fad fa-lg fa-fw fa-planet-ringed fa-swap-opacity"></i> Planet</a>
              </li>
              <li class="masthead__menu-item">
                <a href="https://github.com/ustclug"><i class="fab fa-lg fa-fw fa-github"></i> GitHub</a>
              </li>
              <li class="masthead__menu-item">
                <a href="https://mirrors.ustc.edu.cn/"><i class="fad fa-lg fa-fw fa-server"></i> Mirrors</a>
              </li>
            </ul>
            <button class="search__toggle" type="button">
              <span class="visually-hidden">切换搜索</span>
              <i class="fas fa-search"></i>
            </button>
            <button class="greedy-nav__toggle hidden" type="button">
              <span class="visually-hidden">切换菜单</span>
              <div class="navicon"></div>
            </button>
            <ul class="hidden-links hidden"></ul>
          </nav>
        </div>
      </div>
    </div>
    <div class="initial-content">
      <div id="main" role="main">
        <div class="sidebar sticky">
          <nav class="nav__list">
            <input id="ac-toc" name="accordion-toc" type="checkbox" />
            <label for="ac-toc">切换菜单</label>
            <ul class="nav__items">
              <li>
                <span class="nav__sub-title">LUG @ USTC</span>
                <ul>
                  <li><a href="/"><i class="fad fa-lg fa-fw fa-home"></i> LUG 首页</a></li>
                  <li><a href="/news/"><i class="fad fa-lg fa-fw fa-newspaper"></i> LUG 新闻</a></li>
                  <li><a href="/wiki/lug/links/"><i class="fad fa-lg fa-fw fa-link"></i> 友情链接</a></li>
                  <li><a href="/wiki/server/mirrors/"><i class="fad fa-lg fa-fw fa-database"></i> 开源软件镜像</a></li>
                </ul>
              </li>
              <li>
                <span class="nav__sub-title">活动</span>
                <ul>
                  <li><a href="/wiki/lug/events/"><i class="fad fa-lg fa-fw fa-sparkles"></i> LUG 活动</a></li>
                  <li><a href="/wiki/lug/events/weeklyparty/"><i class="fad fa-lg fa-fw fa-users-class"></i> 每周小聚</a></li>
                  <li><a href="https://101.lug.ustc.edu.cn/"><i class="fad fa-lg fa-fw fa-graduation-cap"></i> Linux 101</a></li>
                  <li><a href="/wiki/lug/mailinglist/"><i class="fad fa-lg fa-fw fa-envelope-open-text"></i> 邮件列表</a></li>
                  <li><a href="/wiki/lug/book/"><i class="fad fa-lg fa-fw fa-books"></i> LUG 书库</a></li>
                  <li><a href="/wiki/lug/finance/"><i class="fad fa-lg fa-fw fa-piggy-bank"></i> LUG 财务</a></li>
                </ul>
              </li>
              <li>
                <span class="nav__sub-title">联系</span>
                <ul>
                  <li><a href="/wiki/lug/person-in-charge/"><i class="fad fa-lg fa-fw fa-user-tie"></i> LUG 负责人</a></li>
                  <li><a href="/wiki/lug/contact/"><i class="fas fa-lg fa-fw fa-phone-alt"></i> 联系我们</a></li>
                  <li><a href="/wiki/lug/contribute/"><i class="fad fa-lg fa-fw fa-users-medical"></i> 加入我们</a></li>
                  <li><a href="/wiki/lug/finance/donate/"><i class="fad fa-lg fa-fw fa-donate"></i> 捐赠我们</a></li>
                </ul>
              </li>
              <li>
                <span class="nav__sub-title">资源</span>
                <ul>
                  <li><a href="/wiki/linux_digest/"><i class="fad fa-lg fa-fw fa-book"></i> Linux 文摘</a></li>
                  <li><a href="/wiki/lug/resources/"><i class="fad fa-lg fa-fw fa-bookmark"></i> 资源导航</a></li>
                  <li><a href="https://servers.ustclug.org/"><i class="fad fa-lg fa-fw fa-server"></i> 服务器新闻</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
        <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
          <meta itemprop="headline" content="中国科学技术大学校园网 PXE 服务 FAQ">
          <meta itemprop="description" content="中国科学技术大学校园网 PXE 服务 FAQ">
          <meta itemprop="datePublished" content="2020-08-15T12:48:35+08:00">
          <meta itemprop="dateModified" content="2022-12-09T16:35:50+08:00">
          <div class="page__inner-wrap">
            <header>
              <h1 id="page-title" class="page__title" itemprop="headline">中国科学技术大学校园网 PXE 服务 FAQ
              </h1>
            </header>
            <section class="page__content" itemprop="text">
              <aside class="sidebar__right sticky">
                <nav class="toc">
                  <header>
                    <h4 class="nav__title"><i class="fas fa-file-alt"></i> 目录</h4>
                  </header>
                  <ul class="toc__menu">
                    <li><a href="#一般用户">一般用户</a>
                      <ul>
                        <li><a href="#什么是-pxe">什么是 PXE</a></li>
                        <li><a href="#pxeustc-有什么用处">PXE.USTC 有什么用处？</a></li>
                        <li><a href="#pxeustc-提供了哪些系统工具">PXE.USTC 提供了哪些系统/工具？</a></li>
                        <li><a href="#享受-pxeustc-服务需要什么软硬件环境">享受 PXE.USTC 服务需要什么软硬件环境？</a></li>
                        <li><a href="#如何激活我电脑中的-pxe-boot-agent">如何激活我电脑中的 PXE Boot Agent？</a></li>
                      </ul>
                    </li>
                    <li><a href="#高级用户">高级用户</a>
                      <ul>
                        <li><a href="#我的电脑没有内置-pxe-boot-agent我该怎么做">我的电脑没有内置 PXE Boot Agent，我该怎么做？</a></li>
                        <li><a href="#如何制作-pxe-启动软盘">如何制作 PXE 启动软盘？</a></li>
                        <li><a href="#如何制作-pxe-eeprom">如何制作 PXE EEPROM？</a></li>
                        <li><a href="#如何把-pxe-boot-agent-加入-grublilo-的启动菜单">如何把 PXE Boot Agent 加入 GRUB/LILO 的启动菜单？</a></li>
                        <li><a href="#如何把某个-pxeustc-上的网络启动系统直接加入-grublilo-的启动菜单">如何把某个 PXE.USTC 上的网络启动系统直接加入 GRUB/LILO 的启动菜单？</a></li>
                        <li><a href="#如何直接把-knoppix-live-cd-的-iso-文件安装到本地硬盘">如何直接把 Knoppix Live CD 的 iso 文件安装到本地硬盘？</a></li>
                      </ul>
                    </li>
                    <li><a href="#管理员">管理员</a>
                      <ul>
                        <li><a href="#出于管理的需要我们机房希望只为内部网络提供受限的-pxe-服务或加以密码保护">出于管理的需要，我们机房希望只为内部网络提供受限的 PXE 服务，或加以密码保护</a></li>
                        <li><a href="#我们实验室有自己的网关和-dhcp-服务器该如何设置以便子网内的计算机能够访问-pxe-服务">我们实验室有自己的网关和 DHCP 服务器，该如何设置以便子网内的计算机能够访问 PXE 服务？</a></li>
                        <li><a href="#可以进一步建立自己的-tftp-服务器所需的文件可以从我们这里取得">可以进一步建立自己的 TFTP 服务器，所需的文件可以从我们这里取得</a></li>
                      </ul>
                    </li>
                    <li><a href="#开发者">开发者</a>
                      <ul>
                        <li><a href="#pxe-的加载过程">PXE 的加载过程？</a></li>
                        <li><a href="#受限和密码保护的-pxe-菜单系统是如何实现的">受限和密码保护的 PXE 菜单系统是如何实现的？</a></li>
                        <li><a href="#xxx-很不错能不能把它也加入-pxeustc-">XXX 很不错，能不能把它也加入 PXE.USTC ？</a></li>
                        <li><a href="#如何把一张-linuxbsd-的-live-cd-做成可网络启动">如何把一张 Linux/BSD 的 Live CD 做成可网络启动？</a></li>
                        <li><a href="#如何把一个安装在服务器硬盘上的-linux-系统做成可网络启动">如何把一个安装在服务器硬盘上的 Linux 系统做成可网络启动？</a></li>
                      </ul>
                    </li>
                    <li><a href="#相关链接">相关链接</a></li>
                  </ul>
                </nav>
              </aside>
              <h2 id="一般用户">一般用户</h2>
              <h3 id="什么是-pxe">什么是 PXE</h3>
              <p>PXE(Pre-boot Execution Environment)是由 Intel 设计的协议，它可以使计算机通过网络启动。协议分为 client 和 server 两端，PXE client 在网卡的 ROM 中，当计算机引导时，BIOS 把 PXE client 调入内存执行，并显示出命令菜单，经用户选择后，PXE client 将放置在远端的操作系统通过网络下载到本地运行。 — 摘自 <a href="http://www-900.ibm.com/developerWorks/cn/linux/l-tip-prompt/l-pex/index.shtml#2">IBM 中国</a></p>
              <p>In the mid-90’s, Compaq, Dell, HP, Intel, and Microsoft jointly released a system design guide for building Net PC systems. The guide describes a method of booting the operating system from a network server. This method eventually became known as the Preboot Execution Environment (PXE). Several manufacturers have created implementations of the PXE specification, and include a PXE compliant BootROM on their network cards. Most computer motherboards with embedded network interfaces include PXE in the BIOS.</p>
              <p>PXE is designed to load a small (32kb or less) image called a Network Bootstrap Program (NBP). The NBP is then responsible for loading the operating system image. When using PXE to boot an LTSP workstation, the choices for an NBP are PXELINUX and Etherboot. — 摘自 <a href="http://wiki.ltsp.org/twiki/bin/view/Ltsp/PXE#Introduction_to_PXE">LTSP</a></p>
              <h3 id="pxeustc-有什么用处">PXE.USTC 有什么用处？</h3>
              <p>用途举例：</p>
              <ul>
                <li>安装新系统 – 安装 Linux/Windows，但是电脑没有软驱/光驱，有没有 USB 启动功能；</li>
                <li>修复老系统 – 电脑因为病毒/引导程序损坏等原因，无法启动了；</li>
                <li>学习 Linux – 试用 GNU/Linux，跳过安装/配置门槛；</li>
                <li>Cluster – 快速部署和简单管理；</li>
                <li>教学实验 – 在公共机房中创建 UNIX/C/C++/Java/Matlab 等的教学实验平台。</li>
              </ul>
              <h3 id="pxeustc-提供了哪些系统工具">PXE.USTC 提供了哪些系统/工具？</h3>
              <table>
                <thead>
                  <tr>
                    <th>linux</th>
                    <th>一个 Debian GNU/Linux 系统，主要用于学习目的，目前只提供命令行界面</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>knoppix</td>
                    <td>一个基于 Debian 的 LiveCD，主要用于桌面 如果您的网卡不被支持，可以试试 allnic，其中包含了所有网卡驱动，副作用是 initrd 加载会慢一些</td>
                  </tr>
                  <tr>
                    <td>debian/redhat/mandrake</td>
                    <td>Debian/Fedora/Mandrake 网络安装程序</td>
                  </tr>
                  <tr>
                    <td>rip</td>
                    <td>Recovery Is Possible, 基于 Linux 的小型急救系统(http://www.tux.org/pub/people/kent-robotti/looplinux/rip/)</td>
                  </tr>
                  <tr>
                    <td>pxes</td>
                    <td>一个微型的 Linux 终端系统(http://pxes.sourceforge.net/)</td>
                  </tr>
                  <tr>
                    <td>stresslinux</td>
                    <td>用于对硬件系统进行高负荷性能及稳定性测试(http://www.stresslinux.org/)</td>
                  </tr>
                  <tr>
                    <td>mcafee/fprot/antivir/avast</td>
                    <td>几个病毒检测程序，个人版，同时包含在 dosnet 的 N:盘上病毒库每月更新</td>
                  </tr>
                  <tr>
                    <td>freedos</td>
                    <td>FreeDOS, 兼容 MSDOS 的自由 DOS。不要试图在 FreeDOS 中安装 Windows</td>
                  </tr>
                  <tr>
                    <td>dos</td>
                    <td>一个 8MB 的虚拟软盘，提供了很多工具</td>
                  </tr>
                  <tr>
                    <td>dosnet</td>
                    <td>一个支持 TCP/IP 网络的 FreeDOS 虚拟软盘，它的 MSLAN 网络驱动器 N: 上的程序是 dos 的超集。如果它启动时无法自动加载网卡驱动，可以试试手动选择网卡列表中最后的 UNDIS/UNDIS3C 两种 PXE 网卡驱动</td>
                  </tr>
                </tbody>
              </table>
              <p>其中的很多系统工具有很大的危险性，在使用之前请仔细阅读它们的文档并小心操作。使用这些工具而造成的任何损害，均由使用者本人负全部责任。</p>
              <p>各类系统工具的主要来源是:</p>
              <ul>
                <li><a href="http://ubcd.sourceforge.net/index.html">Ultimate Boot CD</a>，这里存有部分<a href="http://pxe.ustc.edu.cn/ubcd/index.html">本地文档</a>。
                  Ultimate Boot CD contains close to 100 tools that are extremely useful when setting up or maintaining a PC.</li>
              </ul>
              <p>另外以下站点还有很多不错的软件资源：</p>
              <ul>
                <li><a href="http://www.undercoverdesign.com/dosghost/dos/utildos.htm">UTILITIES FOR 16 BIT DOS</a> <a href="http://doshome.net/soft/">DOS 之家软件站</a></li>
              </ul>
              <p>dosnet 是由以下工具整合而成：</p>
              <ul>
                <li><a href="http://www.nu2.nu/bootdisk/network/">Bart’s Network Boot Disk</a>
                  A highly professional network boot disk for connecting to a network share on a Windows 9x/ME/NT4/2000/XP or Linux Samba machine.
                  Modular design - based on <a href="http://www.nu2.nu/bootdisk/modboot/">modboot</a> . This means you can customize the bootdisk yourself by adding only the modules you need.</li>
                <li><a href="http://www.netbootdisk.com/">Universal TCP/IP Network Bootdisk</a>
                  A DOS bootdisk that provides TCP/IP networking support.</li>
                <li>Intel PXE PDK 2.0</li>
              </ul>
              <h3 id="享受-pxeustc-服务需要什么软硬件环境">享受 PXE.USTC 服务需要什么软硬件环境？</h3>
              <p>您的电脑最好内置有 PXE Boot Agent，并且已经<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#如何激活我电脑中的_pxe_boot_agent">激活</a>；没有现成支持的话，有<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#我的电脑没有内置_pxe_boot_agent_我该怎么做">几种解决办法</a>。
                您所在的网段最好有能提供正确的 PXE 信息的 DHCP 服务器，以及可以通过 TFTP 数据包的网关；没有的话可以请管理员加以<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#我们实验室有自己的网关和dhcp服务器_该如何设置以便子网内的计算机能够访问pxe服务">设置</a>，或自己动手<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#如何把某个_pxeustc_上的网络启动系统直接加入_grublilo_的启动菜单">把网络启动系统加入 GRUB/LILO 菜单</a>。
                如果您所在实验室用地址转换/伪装技术建立了自己的子网，则需要<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#我们实验室有自己的网关和dhcp服务器_该如何设置以便子网内的计算机能够访问pxe服务">配置</a>。</p>
              <h3 id="如何激活我电脑中的-pxe-boot-agent">如何激活我电脑中的 PXE Boot Agent？</h3>
              <p>目前有不少主板内部已经集成了 PXE 启动代码，一般的判别准则是：集成了网卡芯片的主板通常都会在 BIOS 中包含 PXE Boot Agent。
                很多主板内置了 PXE Boot Agent 但是没有激活它，激活标志通常是：在电脑启动自检后在屏幕上会出现 PXE 字样。
                为了激活 PXE Boot Agent，需要修改一到两处 BIOS 设置。具体的方法各个主板不尽相同，一般需要检查如下两项：</p>
              <ul>
                <li>把 Onboard LAN 和 Onboard LAN Boot ROM (或类似的选项)设为 Enabled。</li>
                <li>把 LAN (或类似的设备)设成第一启动设备 （如果你的电脑在启动时显示 “Press XX to boot from LAN” 字样，则可省略这一步）</li>
              </ul>
              <p>升技 NF7 系列主板的设置：</p>
              <div class="language-plaintext highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>Integrated Peripherals-&gt;OnChip PCI Device-&gt;
        LAN Controller          [Enabled]
        - LAN Boot ROM          [Enabled]

Advanced BIOS Features-&gt;
        First Boot Device       [LAN]
</code></pre>
                </div>
              </div>
              <p>微星 NEO 2 主板设置：</p>
              <div class="language-plaintext highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code>Integrated Peripherals-&gt;
        Onboard LAN             [Enabled]
        Load onboard LAN BIOS   [Enabled]

Boot Device Prioty:
        LAN
</code></pre>
                </div>
              </div>
              <p>有些主板还包含更多的设置选项。比如 Intel Boot Agent 的 <a href="http://pxe.ustc.edu.cn/images/boot-device-pxe.gif">激活</a> 及 <a href="http://pxe.ustc.edu.cn/images/intel-boot-agent-setup.gif">设定</a>； Realtek Boot Agent 的<a href="http://pxe.ustc.edu.cn/images/realtek-boot-agent-setup.gif">设定</a>。</p>
              <h2 id="高级用户">高级用户</h2>
              <h3 id="我的电脑没有内置-pxe-boot-agent我该怎么做">我的电脑没有内置 PXE Boot Agent，我该怎么做？</h3>
              <p>可以自己制作包含 PXE Boot Agent 的<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#如何制作_pxe_启动软盘">启动软盘</a>/<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#如何制作_pxe_eeprom">EEPROM</a>，也可以把它加入引导程序的<a href="https://lug.ustc.edu.cn/wiki/server/pxe/faq#如何把_pxe_boot_agent_加入_grublilo_的启动菜单">启动菜单</a>。</p>
              <h3 id="如何制作-pxe-启动软盘">如何制作 PXE 启动软盘？</h3>
              <ol>
                <li>打开 <a href="http://rom-o-matic.net/">ROM-o-matic.net</a> 网站</li>
                <li>单击 Etherboot 5.3.12 或以上的版本</li>
                <li>在 “1. Choose NIC/ROM type:” 中选择你的网卡类型</li>
                <li>单击网页第四项中的 “Get ROM” 按钮下载它帮你动态生成的启动文件</li>
                <li>插入一个空白软盘，运行网页第六项中提示的命令。(在 Windows 下的话就用 rawwrite 程序写软盘。)</li>
              </ol>
              <h3 id="如何制作-pxe-eeprom">如何制作 PXE EEPROM？</h3>
              <ol>
                <li>打开 <a href="http://rom-o-matic.net/">ROM-o-matic.net</a> 网站</li>
                <li>单击 Etherboot 5.3.12 或以上的版本</li>
                <li>在 “1. Choose NIC/ROM type:” 中选择你的网卡类型</li>
                <li>在 “2. Choose ROM output format:” 中选择 “Binary ROM Image(.zrom)”</li>
                <li>单击网页第四项中的 “Get ROM” 按钮下载它帮你动态生成的启动文件</li>
                <li>带上此文件前去步瑞祺二楼，那里有卖 EEPROM 的公司，让他们帮你把文件烧刻进 EEPROM。</li>
                <li>把做好的 EEPROM <a href="http://pxe.ustc.edu.cn/images/8139_NIC_PXE.jpg">插入网卡</a>。</li>
              </ol>
              <p>在做 EEPROM 之前请注意：</p>
              <ul>
                <li>先做一张 PXE 启动软盘，确认<a href="http://pxe.ustc.edu.cn/images/etherboot-screen.gif">运行无误</a>。</li>
                <li>确保网卡的 PCI ID 与第三步中所选的类型相匹配，否则 BIOS 不会调用它(虽然它的软盘版本可以正确运行)。</li>
                <li>有的网卡用的是 <a href="http://pxe.ustc.edu.cn/images/8139_28pin_bootrom.jpg">28 pin EEPROM</a>， 有的是 <a href="http://pxe.ustc.edu.cn/images/8139_32pin_bootrom.jpg">32 pin EEPROM</a>。</li>
              </ul>
              <h3 id="如何把-pxe-boot-agent-加入-grublilo-的启动菜单">如何把 PXE Boot Agent 加入 GRUB/LILO 的启动菜单？</h3>
              <p>以我的系统为例：</p>
              <ol>
                <li>打开 <a href="http://rom-o-matic.net/">ROM-o-matic.net</a> 网站</li>
                <li>单击 Etherboot 5.3.12 或较新的版本</li>
                <li>在 “1. Choose NIC/ROM type:” 中选择你的网卡类型</li>
                <li>在 “2. Choose ROM output format:” 中选择 “LILO/GRUB/SYSLINUX loadable kernel format (.zlilo)”</li>
                <li>单击网页第四项中的 “Get ROM” 按钮下载它帮你动态生成的启动文件</li>
                <li>将此文件放入 /boot 目录，并加入 GRUB 配置如下：</li>
              </ol>
              <div class="language-plaintext highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code># cat&gt;&gt;/boot/grub/menu.lst&lt;&lt;EOF
title           etherboot
root            (hd0,2)
kernel          /boot/eb-5.3.12-forcedeth.zlilo
savedefault
boot
EOF
</code></pre>
                </div>
              </div>
              <p>Windows 9x/XP/NT 用户需要下载安装 <a href="http://sourceforge.net/projects/grub4dos/">WINGRUB</a> ，并阅读它提供的<a href="http://grub4dos.sourceforge.net/wingrub.html">文档</a> 和<a href="http://grub4dos.sourceforge.net/wingrub_examples.html">示例</a> 。 强烈推荐 <a href="http://grub.linuxeden.com/">Linuxeden 的 GRUB 专区</a>，这里可以找到中文文档及最新版本。</p>
              <h3 id="如何把某个-pxeustc-上的网络启动系统直接加入-grublilo-的启动菜单">如何把某个 PXE.USTC 上的网络启动系统直接加入 GRUB/LILO 的启动菜单？</h3>
              <p>以我的系统为例：</p>
              <div class="language-plaintext highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code># aptitude install tftp
# mkdir /boot/knoppix ; cd /boot/knoppix
# tftp pxe.ustc.edu.cn
tftp&gt; get /tftpboot/knoppix/vmlinuz /tftpboot/knoppix/miniroot.gz
tftp&gt; quit
# cat&gt;&gt;/boot/grub/menu.lst&lt;&lt;EOF
title           KNOPPIX on NFS
root            (hd0,2)
kernel          /boot/knoppix/vmlinuz nfsdir=pxe.ustc.edu.cn:/pub/pub knoppix_dir=KNOPPIX501 \
                nodhcp lang=us ramdisk_size=100000 init=/etc/init apm=power-off nomce noeject quiet
initrd          /boot/knoppix/miniroot.gz
savedefault
boot
EOF
</code></pre>
                </div>
              </div>
              <p>请把上面的(hd0,2)替换为您所使用的分区。</p>
              <p>Windows 9x/XP/NT 用户需要下载安装 <a href="http://sourceforge.net/projects/grub4dos/">GRUB4DOS</a> 。为了方便起见，我们做了一个可直接使用的 GRUB4DOS 启动包，用法如下：</p>
              <ol>
                <li>
                  <p>下载 <a href="ftp://pxe.ustc.edu.cn/linux/GRUB4DOS/C/">ftp://pxe.ustc.edu.cn/linux/GRUB4DOS/C/</a>* 到 C:\</p>
                </li>
                <li>
                  <p>将如下一行拷贝到 C:\boot.ini 文件中去（一般是作为它的最后一行）：</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code>C:\GRLDR="GRUB for DOS"
</code></pre>
                    </div>
    </div>
                </li>
                <li>
                  <p>重启，在 Windows 启动菜单中选择 “GRUB for DOS”</p>
                </li>
              </ol>
              <p>此方法适用于 Windows XP/NT 操作系统, C:文件系统为 NTFS/FAT32 均可.
                目前它包含了如下一些启动项目，欢迎使用：</p>
              <ul>
                <li>Debian GNU/Linux for Education</li>
                <li>Debian GNU/Linux for Education (Secure)</li>
                <li>KNOPPIX Live Linux-on-CD</li>
                <li>Debian Sarge Installer</li>
                <li>Mandrake Installer</li>
                <li>Redhat Fedora Core Installer</li>
                <li>Etherboot (for rtl8139)</li>
                <li>Etherboot (for nforce2)</li>
                <li>Etherboot (for via-rhine)</li>
                <li>memtest86+</li>
              </ul>
              <h3 id="如何直接把-knoppix-live-cd-的-iso-文件安装到本地硬盘">如何直接把 Knoppix Live CD 的 iso 文件安装到本地硬盘？</h3>
              <p>下面的 linux 命令序列可以把 knoppix 3.7 安装到 /dev/hda2(空闲空间&gt;700MB)：</p>
              <div class="language-plaintext highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code># wget ftp://202.38.64.123/pub/linux/iso/Knoppix-3.7/KNOPPIX_V3.7-2004-12-08-EN.iso
# mkdir /mnt/knoppix-iso
# mount -o loop KNOPPIX_V3.7-2004-12-08-EN.iso /mnt/knoppix-iso
# mkdir /boot/knoppix
# cp /mnt/knoppix-iso/boot/isolinux/{linux26,minirt26.gz} /boot/knoppix/
# cp -a /mnt/knoppix-iso/KNOPPIX /
# umount /mnt/knoppix-iso
# rmdir /mnt/knoppix-iso
# cat&gt;&gt;/boot/grub/menu.lst&lt;&lt;EOF
title           Debian GNU/Linux, KNOPPIX 3.7
root            (hd0,1)
kernel          /boot/knoppix/linux26 ramdisk_size=100000 init=/etc/init fromhd=/dev/hda2
initrd          /boot/knoppix/minirt26.gz
savedefault
boot
EOF
</code></pre>
                </div>
              </div>
              <p>上面的硬盘分区号 /dev/hda2 及 (hd0,1) 请调整为您实际使用的分区。
                Windows 9x/XP/NT 用户需要下载安装 <a href="http://sourceforge.net/projects/grub4dos/">WINGRUB</a> 。</p>
              <h2 id="管理员">管理员</h2>
              <h3 id="出于管理的需要我们机房希望只为内部网络提供受限的-pxe-服务或加以密码保护">出于管理的需要，我们机房希望只为内部网络提供受限的 PXE 服务，或加以密码保护</h3>
              <p>您有两种选择：</p>
              <ul>
                <li>自己动手，设置网关、 DHCP、TFTP 服务器，提供自己的启动菜单。</li>
                <li>申请网络中心为你们的 MAC 地址或 IP 地址提供特殊服务。</li>
              </ul>
              <h3 id="我们实验室有自己的网关和-dhcp-服务器该如何设置以便子网内的计算机能够访问-pxe-服务">我们实验室有自己的网关和 DHCP 服务器，该如何设置以便子网内的计算机能够访问 PXE 服务？</h3>
              <p>需要做两个方面的设置：</p>
              <ul>
                <li>
                  <p>网关: 允许 tftp 数据包顺利通过</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># modprobe ip_nat_tftp ip_conntrack_tftp
</code></pre>
                    </div>
    </div>
                  <p>可以在系统启动的时候自动加载这两个内核模块：</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># echo ip_nat_tftp &gt;&gt; /etc/modules
# echo ip_conntrack_tftp &gt;&gt; /etc/modules
</code></pre>
                    </div>
    </div>
                </li>
                <li>
                  <p>DHCP 服务: 为 PXELinux/Etherboot 提供必要的信息
                    以安装有 dhcp3-server 的 debian 系统为例：</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># cd /etc/dhcp3
# wget http://pxe.ustc.edu.cn/dhcpd.pxe.conf
# echo 'include "/etc/dhcp3/dhcpd.pxe.conf";' &gt;&gt; dhcpd.conf
# /etc/init.d/dhcp3-server restart
</code></pre>
                    </div>
    </div>
                  <p>如果只有较老版本的 ISC DHCP Server，或者其他 DHCP 服务程序，则只需加入以下两项配置信息，一般情况下都不会有问题：</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code>next-server  pxe.ustc.edu.cn;
filename     "pxelinux.0";
</code></pre>
                    </div>
    </div>
                </li>
              </ul>
              <h3 id="可以进一步建立自己的-tftp-服务器所需的文件可以从我们这里取得">可以进一步建立自己的 TFTP 服务器，所需的文件可以从我们这里取得</h3>
              <div class="language-plaintext highlighter-rouge">
                <div class="highlight">
                  <pre class="highlight"><code># aptitude install tftpd-hpa
# mount pxe.ustc.edu.cn:/tftpboot /tftpboot
# cp /tftpboot/tftpd-hpa /etc/default
</code></pre>
                </div>
              </div>
              <h2 id="开发者">开发者</h2>
              <h3 id="pxe-的加载过程">PXE 的加载过程？</h3>
              <p>这里是 LTSP 的 <a href="http://wiki.ltsp.org/twiki/bin/view/Ltsp/PXE#Booting_with_pxelinux_0">Booting with pxelinux.0</a>；</p>
              <!-- 下面是摘自IBM中国的图解：
[![img](https://lug.ustc.edu.cn/wiki/_media/server/pxe/pxe-boot-process.gif)](https://lug.ustc.edu.cn/wiki/_detail/server/pxe/pxe-boot-process.gif?id=server%3Apxe%3Afaq) -->
              <h3 id="受限和密码保护的-pxe-菜单系统是如何实现的">受限和密码保护的 PXE 菜单系统是如何实现的？</h3>
              <p>缺省的菜单系统是用 PXELinux 实现的，受限的菜单可以用定制的 PXELinux 菜单程序实现，而 MD5 加密的口令保护目前只有 pxegrub 能够支持。</p>
              <ol>
                <li>
                  <p>准备好 MD5 加密的口令</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># grub-md5-crypt
Password:
Retype password:
$1$NcP8o0$DrDhZlUX36Rt6Yzl2RavM/
</code></pre>
                    </div>
    </div>
                </li>
                <li>
                  <p>准备好一个 menu.lst</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># cat /tftpboot/restricted/menu.lst
password --md5 $1$NcP8o0$DrDhZlUX36Rt6Yzl2RavM/
dhcp
root (nd)
color light-gray/blue black/light-gray
title *=*=*=*=*=*=*=*=*=* Welcome to PXE.USTC *=*=*=*=*=*=*=*=*=*

title linux
  kernel /tftpboot/linux/bzImage root=/dev/nfs nfsroot=202.38.73.198:/croot,rsize=8192,wsize=8192,tcp,flags=nolock,intr,v3 ip=dhcp
title knoppix
  kernel /tftpboot/knoppix/vmlinuz nfsdir=202.38.73.198:/croot nodhcp lang=us ramdisk_size=100000 init=/etc/init apm=power-off nomce vga=791 quiet secure BOOT_IMAGE=knoppix
  initrd /tftpboot/knoppix/miniroot.gz
title dos
  kernel /tftpboot/images/memdisk floppy c=8 s=32 h=64
  initrd=/tftpboot/images/dos.igz
  lock
</code></pre>
                    </div>
    </div>
                </li>
                <li>
                  <p>编译</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># ./configure --disable-auto-linux-mem-opt --enable-preset-menu=/tftpboot/restricted/menu.lst --enable-diskless --enable-via-rhine
# make
# cp netboot/pxegrub /tftpboot/restricted/pxegrub.0
</code></pre>
                    </div>
    </div>
                </li>
              </ol>
              <p>遗憾的是 pxegrub 已经有些年没更新了，不支持包括 nForce 在内的一些新网卡。 另外还有更严重的<a href="http://wiki.ltsp.org/twiki/bin/view/Ltsp/PXE#PXEGRUB">稳定性问题</a>，估计是至少某些网卡会存在这种问题。</p>
              <h3 id="xxx-很不错能不能把它也加入-pxeustc-">XXX 很不错，能不能把它也加入 PXE.USTC ？</h3>
              <p>只要版权没有问题，肯定是可以的。不过，请你务必提供直接可以网络启动的新系统，因为我们时间有限，将着重于维护现有的系统。
                所提供的系统或者是一个可启动的软盘映像文件，或者是 kernel, initrd, 以及 pxelinux.cfg 配置文件。必要的话还可以给出 NFS-ROOT 系统。</p>
              <h3 id="如何把一张-linuxbsd-的-live-cd-做成可网络启动">如何把一张 Linux/BSD 的 Live CD 做成可网络启动？</h3>
              <p>可以参考 knoppix Live CD 中的 /usr/sbin/knoppix-terminal-server 脚本，以及它所创建出来的 initrd。
                大体上需要对原有系统的 initrd 做如下两个修改：</p>
              <ol>
                <li>创建一个更大的 initrd，并将原 initrd 中的全部内容，以及各种网卡驱动内核模块、NFS 网络驱动模块、静态链接的 ifconfig/pump 等网络配置程序拷贝进去；</li>
                <li>修改其中 /linuxrc (或类似文件)， 把其中 mount cdrom 的命令改写为 mount nfs 的命令，并在这之前加入加载驱动模块，配置网络的命令。</li>
              </ol>
              <p>对于 BSD 系统，其中的内核模块不妨交由 loader 来加载。</p>
              <h3 id="如何把一个安装在服务器硬盘上的-linux-系统做成可网络启动">如何把一个安装在服务器硬盘上的 Linux 系统做成可网络启动？</h3>
              <p>可以仍然使用用 initrd：</p>
              <ul>
                <li><a href="http://www.ltsp.org/">LTSP</a> 项目提供了相关的支持工具；</li>
                <li>Etherboot 的 contrib/initrd 目录下包含的 mkinitrd-net 工具也可参考使用；</li>
                <li>Debian 还提供了工具包 initrd-netboot-tools。</li>
              </ul>
              <p>或者可以直接使用 NFS-ROOT 方案。基本思路是：</p>
              <ul>
                <li>服务端：</li>
              </ul>
              <ol>
                <li>在服务器上运行 NFS Server，把此系统所在目录共享；</li>
                <li>在此系统中放一个 tmpfs 的处理脚本，动态的在内存文件系统中加载 /etc, /var, /root, /home 目录。
                  可参考 (NFS)pxe.ustc.edu.cn:/croot/etc/rcS.d/S03nfsboot.sh 脚本。</li>
              </ol>
              <ul>
                <li>客户端：</li>
              </ul>
              <ol>
                <li>
                  <p>定制编译一个包含所有必要的网卡驱动，以及如下选项：</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code># Networking options
# Under "Device Drivers ---&gt; Networking support ---&gt; Networking options"

#  Kernel level IP autoconfiguration
CONFIG_IP_PNP=y
#  DHCP support
CONFIG_IP_PNP_DHCP=y

# File systems
# Under "File systems --&gt; Pseudo filesystems"

#  Virtual memory file system support
CONFIG_TMPFS=y
# #  /dev file system support
# CONFIG_DEVFS_FS=y
# # Automatically mount devfs at boot time
# CONFIG_DEVFS_MOUNT=y

# Network File Systems
# Under "File systems --&gt; Network File Systems"

#  NFS file system support
CONFIG_NFS_FS=y
#  Provide NFSv3 client support
CONFIG_NFS_V3=y
#  Root file system on NFS
CONFIG_ROOT_NFS=y
</code></pre>
                    </div>
    </div>
                </li>
                <li>
                  <p>启动此内核时使用参数：</p>
                  <div class="language-plaintext highlighter-rouge">
                    <div class="highlight">
                      <pre class="highlight"><code>root=/dev/nfs nfsroot=202.38.73.198:/croot,rsize=8192,wsize=8192,tcp ip=dhcp
</code></pre>
                    </div>
    </div>
                </li>
              </ol>
              <h2 id="相关链接">相关链接</h2>
              <ul>
                <li>
                  <p>Etherboot</p>
                  <ul>
                    <li>Homepage http://www.etherboot.org/</li>
                    <li>Wiki http://wiki.etherboot.org/</li>
                  </ul>
                </li>
                <li>Diskless Linux http://frank.harvard.edu/~coldwell/diskless/</li>
                <li>PXE Documentation Version 1.0（缺少链接）</li>
                <li>
                  <p>HOWTO setup a PXE 2.x server under Linux http://clic.mandrakesoft.com/documentation/pxe/</p>
                </li>
                <li>基于 NFS*ROOT 的 <a href="http://www.gentoo.org.tw/doc/altinstall.xml#doc_chap5">Gentoo Linux 的 PXE 安装方法</a></li>
                <li>Diskless Nodes with Gentoo http://www.gentoo.org/doc/en/diskless-howto.xml</li>
                <li>FreeBSD Diskless Clients http://the-labs.com/FreeBSD/Diskless/</li>
                <li>Network Booting i386 Unix Variants http://www.munts.com/diskless/netboot.html</li>
                <li>Booting FreeBSD via PXE http://www.tnpi.biz/computing/freebsd/pxe-netboot.shtml</li>
                <li><a href="http://www.kegel.com/linux/pxe.html">Remote Network Boot via PXE</a></li>
                <li><a href="http://debian.jones.dk/tweaks/dhcp3/">Index of /tweaks/dhcp3</a></li>
                <li><a href="http://www-900.ibm.com/developerWorks/cn/linux/l-tip-prompt/l-pex/index.shtml">如何远程安装 Linux</a></li>
                <li><a href="http://frank.harvard.edu/~coldwell/diskless/">Diskless Linux</a></li>
                <li><a href="http://wiki.etherboot.org/">Etherboot Wiki - Main.HomePage</a></li>
                <li><a href="http://clic.mandrakesoft.com/documentation/pxe/">PXE Documentation Version 1.0</a></li>
                <li><a href="http://ubcd.sourceforge.net/index.html">Ultimate Boot CD - Overview</a></li>
                <li><a href="http://bootcd.narod.ru/images.htm">Bootable CD Utilities by reanimatolog - Образы загрузочных дискет и жестких дисков</a></li>
                <li><a href="http://etherboot.anadex.de/">All-drivers Etherboot floppy &amp; how to install etherboot to a hard disk</a></li>
                <li><a href="http://rom-o-matic.net/">ROM-o-matic.net</a></li>
                <li><a href="http://thinstation.sourceforge.net/wiki/index.php/ThIndex">:: ThinStation - a light, full-featured thin client OS ::</a></li>
                <li><a href="http://ftp.us.debian.org/debian/dists/unstable/main/installer-i386/current/images/netboot/">Index of /debian/dists/unstable/main/installer-i386/current/images/netboot</a></li>
                <li>[YAGI - <a href="http://dan.deam.org/yagi.php">Deep Space DaN]</a></li>
                <li><a href="http://moe.tnc.edu.tw/~kendrew/pollix/">Pollix LiveCD</a></li>
                <li><a href="http://www.nu2.nu/bootdisk/network/">Bart’s Network Boot Disk</a></li>
                <li><a href="http://www.netbootdisk.com/download.htm">Universal TCP/IP Network Bootdisk for M$ Networks</a></li>
                <li><a href="http://www.undercoverdesign.com/dosghost/dos/utildos.htm">DOS and W31 utilities for MSDOS, DRDOS, FreeDOS, PCDOS, OpenDOS, and PTSDOS 16 bit DOS versions.</a></li>
                <li><a href="http://marc.herbert.free.fr/linux/win2linstall.html#grub-for-nt">Install GNU/Linux without any CD, floppy, USB-key, nor any other removable media</a></li>
                <li><a href="http://people.cs.uchicago.edu/~gmurali/gui/isodos.html">Boosting the power of a DOS image</a></li>
                <li><a href="http://grub4dos.sourceforge.net/">GRUB4DOS and WINGRUB Project Homepage</a></li>
                <li><a href="http://www.ubcd4win.com/downloads.htm">UBCD for Windows</a></li>
                <li><a href="http://the-labs.com/FreeBSD/Diskless/">The Labs: FreeBSD Diskless</a></li>
                <li><a href="http://www.gentoo.org/doc/en/diskless-howto.xml">Gentoo Linux Documentation – Diskless Nodes with Gentoo</a></li>
                <li><a href="http://www.munts.com/diskless/netboot.html">Network Booting Unix Variants</a></li>
                <li><a href="http://www.tnpi.biz/computing/freebsd/pxe-netboot.shtml">The Network People, Inc. - FreeBSD 5 PXE boot recipe</a></li>
                <li><a href="http://am.xs4all.nl/phpwiki/index.php/Qemu">MorphixWiki! - Qemu</a></li>
                <li><a href="http://dad-answers.com/qemu/utilities/QEMU-HD-Mounter/">Index of /qemu/utilities/QEMU-HD-Mounter</a></li>
                <li><a href="http://distrowatch.com/table.php?distribution=clusterknoppix">DistroWatch.com: clusterKNOPPIX</a></li>
                <li>[<a href="http://mailman.lug.org.uk/pipermail/wolves/2004-November/010482.html">Wolves] using GNU Screen to join two terminals?</a></li>
                <li><a href="http://grub.linuxeden.com/wakka.php?wakka=%CA%D7%D2%B3">Linuxeden 的 GRUB 专区 : 首页</a></li>
                <li><a href="http://pareto.uab.es/mcreel/ParallelKnoppix/">ParallelKnoppix: Bootable CD to Create a Linux Cluster in 15 Minutes</a></li>
                <li><a href="http://cha.homeip.net/blog/archives/2006/08/pxe.html">PXE 網路開機實作</a>*</li>
              </ul>
            </section>
            <footer class="page__meta">
              <p class="page__date"><strong><i class="fad fa-fw fa-calendar-alt" aria-hidden="true"></i> 更新时间:</strong> <time datetime="2022-12-09">2022 年 12 月 9 日</time></p>
            </footer>
            <nav class="pagination">
              <a href="/wiki/server/mirrors/" class="pagination--pager" title="中国科学技术大学开源软件镜像
">上一页</a>
              <a href="/wiki/server/pxe/" class="pagination--pager" title="中国科学技术大学网络启动服务
">下一页</a>
            </nav>
          </div>
        </article>
      </div>
    </div>
    <div class="search-content">
      <div class="search-content__inner-wrap">
        <div class="search-searchbar"></div>
        <div class="search-hits"></div>
      </div>
    </div>
    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
        <!-- end custom footer snippets -->
        <div class="footer-row">
          <div class="footer-block footer__about">
            <p>中国科学技术大学 Linux 用户协会是由中国科学技术大学在校的 GNU/Linux 爱好者发起并组成的团体，旨在联合科大的 GNU/Linux
              使用者，搭建信息交流共享的平台，宣传自由软件的价值，提高自由软件社区文化氛围，推广自由软件的应用。</p>
          </div>
          <div class="footer-block footer__extras">
            <div class="footer__contact">
              <ul>
                <li>
                  <a href="/wiki/intro/"><i class="fad fa-fw fa-address-card"></i> 关于我们</a>
                </li>
                <li>
                  <a href="/wiki/lug/contact/"><i class="fas fa-fw fa-phone-alt"></i> 联系我们</a>
                </li>
                <li>
                  <a href="/wiki/lug/contribute/"><i class="fad fa-fw fa-users"></i> 加入我们</a>
                </li>
                <li>
                  <a href="/feed/"><i class="fad fa-fw fa-rss" style="--fa-secondary-opacity: 0.6;"></i> RSS 订阅</a>
                </li>
                <li>
                  <a href="https://github.com/ustclug/website"><i class="fab fa-fw fa-github"></i> 本站仓库</a>
                </li>
              </ul>
            </div>
            <div class="footer__logo">
              <div class="footer__logo-image">
                <img src="https://ftp.lug.ustc.edu.cn/misc/logo-white.svg" />
              </div>
              <div class="footer__logo-text">
                <!-- a href="http://www.beian.miit.gov.cn" target="_blank">皖ICP备05002528号</a -->
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="/assets/js/main.min.js"></script>
    <!-- Including InstantSearch.js library and styling -->
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">
    <script>
      // Instanciating InstantSearch.js with Algolia credentials
      const search = instantsearch({
        appId: 'CM5ZKX0CV3',
        apiKey: 'aa942e5bdda7368300e322cba95f47f6',
        indexName: 'default',
        searchParameters: {
          restrictSearchableAttributes: [
            'title',
            'content'
          ]
        }
      });

      const hitTemplate = function(hit) {
        const url = hit.url;
        const title = hit._highlightResult.title.value;
        const content = hit._highlightResult.html.value;

        return `
          <div class="list__item">
            <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
              <h2 class="archive__item-title" itemprop="headline"><a href="${url}">${title}</a></h2>
              <div class="archive__item-excerpt" itemprop="description">${content}</div>
            </article>
          </div>
        `;
      }

      // Adding searchbar and results widgets
      search.addWidget(
        instantsearch.widgets.searchBox({
          container: '.search-searchbar',
          poweredBy: true,
          placeholder: '输入您要搜索的关键词...'
        })
      );
      search.addWidget(
        instantsearch.widgets.hits({
          container: '.search-hits',
          templates: {
            item: hitTemplate,
            empty: '无结果',
          }
        })
      );

      // Starting the search only when toggle is clicked
      $(document).ready(function () {
        $(".search__toggle").on("click", function() {
          if(!search.started) {
            search.start();
          }
        });
      });
    </script>
    <img src="/static/USTC_logo.svg" style="position: fixed; bottom: -320px; left: -200px; opacity: 0.1; z-index: -100;" />
  </body>
</html>